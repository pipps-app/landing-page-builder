<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Information for Your New Landing Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
        }
        .editor-container {
            max-width: 900px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .editor-header {
            text-align: center;
            padding-bottom: 15px;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        .editor-header h1 {
             margin-bottom: 0.2em;
             color: #007bff;
        }
        .editor-header .pipps-branding-editor-header {
            font-size: 0.9em;
            color: #555;
            margin-top: 5px;
        }
        .editor-header .pipps-branding-editor-header img {
            height: 20px;
            vertical-align: middle;
            margin-right: 5px;
        }
        h2, h3, h4 {
            color: #333;
            margin-bottom: 0.5em;
        }
        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            border-radius: 5px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="url"],
        .form-group textarea,
        .form-group select {
            width: calc(100% - 22px);
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .form-group input[type="checkbox"] {
            width: auto;
            margin-right: 5px;
        }
        .form-group textarea { min-height: 100px; resize: vertical; }
        .form-group input[type="file"] { margin-top: 5px; }
        .form-group .description { font-size: 0.9em; color: #777; margin-bottom: 5px; }
        .dynamic-list { list-style: none; padding: 0; }
        .dynamic-list li {
            display: flex;
            flex-direction: column;
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #eef;
            border-radius: 5px;
            background-color: #f8f9fa;
        }
        .dynamic-list input[type="text"],
        .dynamic-list input[type="url"] {
             margin-bottom: 8px;
        }
        .dynamic-list textarea {
            width: calc(100% - 22px);
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            min-height: 60px;
            margin-bottom: 10px;
        }
        .add-btn, .remove-btn {
            padding: 8px 12px; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.9em;
        }
        .add-btn { background-color: #28a745; margin-top: -10px; }
        .remove-btn { background-color: #dc3545; align-self: flex-end; }
        .submit-btn {
            display: inline-block; padding: 12px 25px; background-color: #007bff; color: white;
            border: none; border-radius: 4px; font-size: 1.1em; cursor: pointer; text-align: center;
            margin-top: 20px; margin-right: 10px; transition: background-color 0.3s;
        }
        .submit-btn:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }
        .editor-footer {
            text-align: center;
            padding: 15px;
            margin-top: 30px;
            border-top: 1px solid #eee;
            font-size: 0.9em;
            color: #777;
        }
        .editor-footer img {
            height: 20px;
            vertical-align: middle;
            margin-right: 5px;
        }
        #headingStylePreview {
            padding: 10px;
            border: 1px solid #eee;
            margin-top: 10px;
            font-size: 1.5em;
            text-align: center;
            min-height: 1.5em;
        }
        #form-submitted-message {
            display: none;
            text-align: center;
            padding: 40px;
            background-color: #e9f7ef;
            border: 1px solid #28a745;
            border-radius: 8px;
        }
        #form-submitted-message h3 {
            color: #28a745;
        }
        .form-submission-warning {
            padding: 15px;
            margin: 20px 0;
            background-color: #fffbe6;
            border: 1px solid #ffc107;
            border-radius: 8px;
            text-align: center;
            font-size: 0.9em;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="editor-container">
        <div class="editor-header">
            <h1>Business Information Form</h1>
            <div class="pipps-branding-editor-header">
                <img src="https://static.wixstatic.com/media/297e2c_219dd8a8a2004c38ae6baf48171cea73~mv2.png" alt="PIPPS Smart Apps Logo">
                Help us create your amazing landing page by PIPPS Smart Apps
            </div>
        </div>

        <div class="form-section">
            <div id="form-submitted-message">
                <h3>Thank You!</h3>
                <p>Your information has already been submitted from this browser.</p>
                <p>If you need to make changes, please contact us directly at <a href="mailto:info@pipps.app">info@pipps.app</a>.</p>
            </div>
            
            <div id="form-container">
                <form id="businessInfoForm" action="https://formspree.io/f/mzzgzezg" method="POST" enctype="multipart/form-data">

                    <h3>Business Details & Branding</h3>
                    <div class="form-group">
                        <label for="clientLogo">Upload Your Logo (PNG or JPG recommended)</label>
                        <input type="file" id="clientLogo" name="clientLogo" accept="image/png, image/jpeg" onchange="processAndPreviewImage(this, 'clientLogoPreview')">
                        <img id="clientLogoPreview" src="#" alt="Logo Preview" style="display:none; max-width: 150px; max-height: 80px; margin-top: 10px; border:1px solid #ddd;"/>
                    </div>
                    <div class="form-group">
                        <label for="businessName">Business Name*</label>
                        <input type="text" id="businessName" name="businessName" placeholder="e.g., Aspen Creek Castile Soap" required>
                    </div>
                    <div class="form-group">
                        <label for="tagline">Your Tagline or Slogan</label>
                        <input type="text" id="tagline" name="tagline" placeholder="e.g., Pure, Gentle, and Natural Soap for Your Family">
                    </div>
                    <div class="form-group">
                        <label for="headingFont">Preferred Heading Font Style (Optional)</label>
                        <select id="headingFont" name="headingFont">
                            <option value="">-- Select a Font --</option>
                            <option value="Arial, sans-serif">Arial (Modern Sans-Serif)</option>
                            <option value="Georgia, serif">Georgia (Classic Serif)</option>
                            <option value="'Courier New', monospace">Courier New (Monospace)</option>
                            <option value="Verdana, sans-serif">Verdana (Clean & Simple)</option>
                            <option value="'Times New Roman', Times, serif">Times New Roman (Traditional Serif)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="headingColor">Preferred Heading Color (Optional)</label>
                        <select id="headingColor" name="headingColor">
                            <option value="">-- Select a Color --</option>
                            <option value="#333333">Black</option>
                            <option value="#00008B">Dark Blue</option>
                            <option value="#228B22">Forest Green</option>
                            <option value="#DC143C">Crimson Red</option>
                            <option value="#2F4F4F">Dark Slate Gray</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Heading Style Preview (based on your Business Name and selections):</label>
                        <div id="headingStylePreview">Your Business Name Preview</div>
                    </div>

                    <h3>About Your Business Story</h3>
                    <div class="form-group">
                        <label for="businessStory">Your Business Story*</label>
                        <textarea id="businessStory" name="businessStory" required placeholder="Tell us your origin story. Why did you start this business? What's your passion? (e.g., 'I started making concrete pots in my garage as a hobby...')"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="businessMission">Your Mission*</label>
                        <textarea id="businessMission" name="businessMission" required placeholder="What is the ultimate purpose of your business? (e.g., 'Our mission is to provide home gardeners with the highest quality organic fertilizers to grow healthy food.')"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="usp">What Makes You Unique?*</label>
                        <textarea id="usp" name="uniqueSellingProposition" required placeholder="What makes you different from competitors? (e.g., 'All our soaps are handmade in small batches using a traditional Spanish recipe.')"></textarea>
                    </div>

                    <h3>Marketing & SEO</h3>
                    <div class="form-group">
                        <label for="primaryGoal">What is the main goal of your landing page?*</label>
                        <select id="primaryGoal" name="primaryGoal" required>
                            <option value="">-- Select a Goal --</option>
                            <option value="Get customers to call me">Get customers to call me</option>
                            <option value="Get customers to email me">Get customers to email me</option>
                            <option value="Get customers to visit my physical address">Get customers to visit my physical address</option>
                            <option value="Get customers to book an appointment">Get customers to book an appointment</option>
                            <option value="Get customers to buy a product">Get customers to buy a product</option>
                            <option value="Inform customers about services/products">Inform customers about services/products</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="targetAudience">Who is your ideal customer?*</label>
                        <input type="text" id="targetAudience" name="targetAudience" required placeholder="e.g., 'Eco-conscious homeowners', 'Interior designers', 'Organic farmers'">
                    </div>
                    <div class="form-group">
                        <label for="keywords">List 5-10 keywords that describe your business*</label>
                        <input type="text" id="keywords" name="keywords" required placeholder="e.g., 'liquid castile soap', 'handmade concrete planter', 'seaweed fertilizer'">
                    </div>

                    <h3>Services / Products</h3>
                    <p class="description">List up to 10 key services or products you offer. This is crucial for building your page!</p>
                    <ul id="servicesList" class="dynamic-list">
                        <li>
                            <input type="text" name="serviceProduct[0][name]" placeholder="Service / Product 1 Name (e.g., Lavender Castile Soap)">
                            <textarea name="serviceProduct[0][description]" placeholder="Short description (e.g., A calming, all-purpose soap infused with pure lavender essential oil.)"></textarea>
                            <button type="button" class="remove-btn" onclick="removeItem(this)">Remove</button>
                        </li>
                    </ul>
                    <button type="button" class="add-btn" onclick="addService()">+ Add Another Service/Product</button>

                    <h3>Contact Information</h3>
                    <p class="description">Please provide at least a Phone Number or an Email Address for customer contact.</p>
                    <div class="form-group">
                        <label for="phoneNumber">Phone Number</label>
                        <input type="text" id="phoneNumber" name="phoneNumber" placeholder="Your business phone number">
                        <label style="display: inline-block; margin-left: 10px; font-weight: normal;">
                            <input type="checkbox" id="isWhatsapp" name="isWhatsapp">
                            Is this a WhatsApp number?
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="emailAddress">Email Address for Customer Contact*</label>
                        <input type="email" id="emailAddress" name="emailAddress" required placeholder="Your business email address">
                    </div>
                    <div class="form-group">
                        <label for="businessAddress">Business Address (Optional)</label>
                        <textarea id="businessAddress" name="businessAddress" placeholder="Street Address, City, State, Zip Code. Include if relevant for local customers."></textarea>
                    </div>

                    <h3>Social Media & Main Website Links (Optional)</h3>
                    <p class="description">Add links to common social media pages or a primary website. We'll use these for social icons and call-to-action buttons.</p>
                    <div class="form-group">
                        <label for="primary_cta_link">Primary Website or Call-to-Action Link</label>
                        <input type="url" id="primary_cta_link" name="primary_cta_link" placeholder="e.g., Link to your Etsy shop, Calendly booking page, etc.">
                    </div>
                    <div class="form-group"><label for="social_facebook">Facebook</label><input type="url" id="social_facebook" name="social_facebook" placeholder="https://facebook.com/yourpage"></div>
                    <div class="form-group"><label for="social_instagram">Instagram</label><input type="url" id="social_instagram" name="social_instagram" placeholder="https://instagram.com/yourprofile"></div>
                    <div class="form-group"><label for="social_twitter">X (Twitter)</label><input type="url" id="social_twitter" name="social_twitter" placeholder="https://x.com/yourhandle"></div>
                    <div class="form-group"><label for="social_linkedin">LinkedIn</label><input type="url" id="social_linkedin" name="social_linkedin" placeholder="https://linkedin.com/in/yourprofile"></div>

                    <h3>Other Custom Links (Optional)</h3>
                    <p class="description">Add up to 5 other important links (e.g., Pinterest, TikTok, a blog, etc.).</p>
                    <ul id="otherLinksList" class="dynamic-list">
                    </ul>
                    <button type="button" class="add-btn" onclick="addOtherLink()">+ Add Another Link</button>

                    <h3>Business Images (Optional - up to 5 for gallery/page content)</h3>
                    <p class="description">Upload images that represent your business, products, or services. JPG, PNG formats are best.</p>
                    <div class="form-group">
                        <label for="image1">Image 1:</label>
                        <input type="file" id="image1" name="businessImage[]" accept="image/*" onchange="processAndPreviewImage(this, 'imgPreview1')">
                        <img id="imgPreview1" src="#" alt="Image 1 Preview" style="display:none; max-width: 100px; max-height: 100px; margin-top: 5px; border:1px solid #ddd;"/>
                    </div>
                     <div class="form-group">
                        <label for="image2">Image 2:</label>
                        <input type="file" id="image2" name="businessImage[]" accept="image/*" onchange="processAndPreviewImage(this, 'imgPreview2')">
                        <img id="imgPreview2" src="#" alt="Image 2 Preview" style="display:none; max-width: 100px; max-height: 100px; margin-top: 5px; border:1px solid #ddd;"/>
                    </div>
                     <div class="form-group">
                        <label for="image3">Image 3:</label>
                        <input type="file" id="image3" name="businessImage[]" accept="image/*" onchange="processAndPreviewImage(this, 'imgPreview3')">
                        <img id="imgPreview3" src="#" alt="Image 3 Preview" style="display:none; max-width: 100px; max-height: 100px; margin-top: 5px; border:1px solid #ddd;"/>
                    </div>
                    <div class="form-group">
                        <label for="image4">Image 4:</label>
                        <input type="file" id="image4" name="businessImage[]" accept="image/*" onchange="processAndPreviewImage(this, 'imgPreview4')">
                        <img id="imgPreview4" src="#" alt="Image 4 Preview" style="display:none; max-width: 100px; max-height: 100px; margin-top: 5px; border:1px solid #ddd;"/>
                    </div>
                    <div class="form-group">
                        <label for="image5">Image 5:</label>
                        <input type="file" id="image5" name="businessImage[]" accept="image/*" onchange="processAndPreviewImage(this, 'imgPreview5')">
                        <img id="imgPreview5" src="#" alt="Image 5 Preview" style="display:none; max-width: 100px; max-height: 100px; margin-top: 5px; border:1px solid #ddd;"/>
                    </div>

                    <div class="form-submission-warning">
                        <strong>Please submit this form only once.</strong> We will use your first submission as the official record. If you need to make corrections after submitting, please contact us directly.
                    </div>

                    <input type="hidden" name="_replyto" value="">
                    <input type="hidden" name="_subject" value="New Landing Page Info Submission - {{businessName}}">

                    <button type="submit" id="submit-button" class="submit-btn">Send My Information</button>
                </form>
            </div>
        </div>

        <div class="editor-footer">
            <img src="https://static.wixstatic.com/media/297e2c_219dd8a8a2004c38ae6baf48171cea73~mv2.png" alt="PIPPS Smart Apps Logo">
            Secure Information Form by PIPPS Smart Apps
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const formContainer = document.getElementById('form-container');
            const submittedMessage = document.getElementById('form-submitted-message');
            if (sessionStorage.getItem('formSubmitted') === 'true') {
                formContainer.style.display = 'none';
                submittedMessage.style.display = 'block';
            }
        });

        const businessNameInput = document.getElementById('businessName');
        const headingFontSelect = document.getElementById('headingFont');
        const headingColorSelect = document.getElementById('headingColor');
        const headingStylePreview = document.getElementById('headingStylePreview');

        function updateFormHeadingPreview() {
            const name = businessNameInput.value || 'Your Business Name Preview';
            const font = headingFontSelect.value || 'Arial, sans-serif';
            const color = headingColorSelect.value || '#333333';
            headingStylePreview.textContent = name;
            headingStylePreview.style.fontFamily = font;
            headingStylePreview.style.color = color;
        }
        businessNameInput.addEventListener('input', updateFormHeadingPreview);
        headingFontSelect.addEventListener('change', updateFormHeadingPreview);
        headingColorSelect.addEventListener('change', updateFormHeadingPreview);
        updateFormHeadingPreview();

        const emailAddressForReply = document.getElementById('emailAddress');
        const hiddenReplyToInput = document.querySelector('input[name="_replyto"]');
        if (emailAddressForReply && hiddenReplyToInput) {
            function updateHiddenReplyTo() {
                hiddenReplyToInput.value = emailAddressForReply.value;
            }
            emailAddressForReply.addEventListener('input', updateHiddenReplyTo);
            updateHiddenReplyTo();
        }

        const MAX_IMAGE_WIDTH = 1200;
        const MAX_IMAGE_HEIGHT = 1200;
        const JPEG_QUALITY = 0.8;

        function processAndPreviewImage(input, previewId) {
            const preview = document.getElementById(previewId);
            if (input.files && input.files[0]) {
                const originalFile = input.files[0];
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = new Image();
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        let { width, height } = img;
                        if (width > MAX_IMAGE_WIDTH || height > MAX_IMAGE_HEIGHT) {
                            const ratio = Math.min(MAX_IMAGE_WIDTH / width, MAX_IMAGE_HEIGHT / height);
                            width *= ratio;
                            height *= ratio;
                        }
                        canvas.width = width;
                        canvas.height = height;
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0, width, height);
                        canvas.toBlob(function(blob) {
                            if (blob) {
                                const newFileName = originalFile.name.split('.').slice(0, -1).join('.') + '.jpeg';
                                const resizedFile = new File([blob], newFileName, { type: 'image/jpeg', lastModified: Date.now() });
                                const dataTransfer = new DataTransfer();
                                dataTransfer.items.add(resizedFile);
                                input.files = dataTransfer.files;
                                preview.src = URL.createObjectURL(blob);
                                preview.style.display = 'block';
                                preview.onload = () => URL.revokeObjectURL(preview.src);
                            } else {
                                preview.src = e.target.result;
                                preview.style.display = 'block';
                            }
                        }, 'image/jpeg', JPEG_QUALITY);
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(originalFile);
            } else {
                preview.src = '#';
                preview.style.display = 'none';
            }
        }

        const MAX_SERVICES = 10;
        function addService() {
            const list = document.getElementById('servicesList');
            if (list.children.length >= MAX_SERVICES) {
                alert(`You can add a maximum of ${MAX_SERVICES} services/products.`);
                return;
            }
            const itemIndex = list.children.length;
            const newItem = document.createElement('li');
            newItem.innerHTML = `
                <input type="text" name="serviceProduct[${itemIndex}][name]" placeholder="Service / Product ${itemIndex + 1} Name">
                <textarea name="serviceProduct[${itemIndex}][description]" placeholder="Short description for this item."></textarea>
                <button type="button" class="remove-btn" onclick="removeItem(this)">Remove</button>
            `;
            list.appendChild(newItem);
        }

        const MAX_OTHER_LINKS = 5;
        function addOtherLink() {
            const list = document.getElementById('otherLinksList');
            if (list.children.length >= MAX_OTHER_LINKS) {
                alert(`You can add a maximum of ${MAX_OTHER_LINKS} custom links.`);
                return;
            }
            const itemIndex = list.children.length;
            const newItem = document.createElement('li');
            newItem.innerHTML = `
                <input type="text" name="otherLink[${itemIndex}][label]" placeholder="Link Label (e.g., 'My Pinterest Board')">
                <input type="url" name="otherLink[${itemIndex}][url]" placeholder="Link URL (e.g., https://pinterest.com/yourprofile)">
                <button type="button" class="remove-btn" onclick="removeItem(this)">Remove</button>
            `;
            list.appendChild(newItem);
        }

        function removeItem(button) {
            button.parentElement.remove();
        }

        const businessInfoForm = document.getElementById('businessInfoForm');
        businessInfoForm.addEventListener('submit', function(event) {
            const phone = document.getElementById('phoneNumber').value.trim();
            const email = document.getElementById('emailAddress').value.trim();
            if (!phone && !email) {
                alert('Please provide either a Phone Number or an Email Address for customer contact.');
                event.preventDefault();
                return;
            }
            const submitButton = document.getElementById('submit-button');
            submitButton.disabled = true;
            submitButton.textContent = 'Submitting...';
            sessionStorage.setItem('formSubmitted', 'true');
});
</script>
</body>
</html>